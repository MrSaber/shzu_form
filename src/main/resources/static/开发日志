现在布局一下今天的开发进度，


学院界面
    |__登录后台
    |__填写报表
        |__每学年填写一次，也就是说，要有Year字段，要判断，那么在存储的时候就要存入当前年月。
        |__填写报表与查看报表是否为一个页面呢？不要为一个！现在可以获取到最近的一条记录。
        |__是否允许编写呢，还有防止多次提交该怎么做呢？每个用户设置一个Check，每次提交以后Check自动变为0，为0则不允许提.
        |__思考如何查看用户ID？最后在后台获得！！！
    |__查看报表

专家界面
    |__登录后台
    |__填写报表
        |__专家填写的也是学院的，但是这三张表是独立的，如何实现填写独立，但又绑定同一个学院呢？每个FORM再设置一个form_expert_id

部门界面
    |__登录后台
        |__每个部门都拥有不同的页面
    |__填写报表
        |__每个部分只负责一部分，那么如何编写这部分呢
            首先，要标示是哪个用户的，所以也要提交 form_user_id ，需不需要设置部门form_depart_id,当然是需要;
            其次，每个部门要评的表可以是共享一份，只是不同字段而已，如何解决
            最后，如何查看
        |__部门提交的数据如何保存?
            存储在FORM表单中，但是depart_id不显示为空,office_id是其对应的学院的ID,user_id可以为空
            |__探索触发器的可能性！！！
                            表结构 FORM(form_office_id、form_depart_id)
                                  CF（cf_fid,cf_cid）
            【答案】不可以，因为我们不知道cf_cid是哪个？
                我们如何快速解决这个问题！！！
                最简单的方法，废掉cf表！！！
                直接在form里面添加cid字段！！！




    |__如何汇总数据呢？
        首先我们分析一下如何获得对同一学院报表的所有部门的拼装
            表结构 FORM(form_office_id、form_depart_id)
                  CF（cf_fid,cf_cid）
        【方法】 取得所有部门的ID：
        然后在FROM中取出这些部门对应的表单！！！
        【问题】 cf 表结构有问题，我们根据cid,xyid才可以唯一找出某张表

            不如我们建一个视图

            比如我们10个部门提交了10次表单，针对某一学院

            SELECT * FROM SHZU_FORM WHERE form.office_id = #{xyID} and form.depart_id!=null and form.office_id IN (SELECT cf_fid FORM CF WHERE cf_cid = #{cid})

总管理员界面
    |__专家管理
        |__添加专家
        |__删除专家
        |__分配学院
            |__删除学院
                |__delXY
            |__增加学院
                |__addXY
            |__获得学院
                |__getXY
    |__学院账号管理
        |__查看账号
        |__修改账号
        |__删除账号
    |__部门管理
        |__查看部门
        |__修改信息
    |__开启权限
        |__表单项
            |__测评名称 【文本框】
            |__起始时间 【】～【】
            |__开启权限 【按钮】
        |__表结构设计
            |__add
            |__getAll
    |__编写公告
        |__学院公告
        |__部门公告
        |__专家公告
            |__表单项
                |__富文本编辑器 【wangeditor】
                |__发布时间 【】
                |__发布 【按钮】
    |__查看审核
        |__关联关系：一个shzu_cp对应多个shzu_form
           如何解决关联关系？
                建立新表 shzu_cp_form
                新表表单项
                   |__cp_fm_id
                   |__cp_fm_cpid
                     |__cp_fm_fmid
           怎么调用关联关系(嵌套查询)？
                分析一下业务流程
                    查看某一学院的表单信息
                        SELECT * FROM shzu_form WHERE form_id  = (SELECT cf_fid WHERE cf_cid=? and cf_of_id=?)
                        SELECT * FROM shzu_form,shzu_cp,shzu_cp_fm WHERE
                    【结果】：均有问题
                    【原因】：表结构问题
                TODO：【2017-12-30 完毕】
                    1.修改form表结构，加入 单位  √
                    2.修改权限赋予方式，即 isPermit 赋予 单位  √
                    3.将页面进行集成，首先完善开通权限页面和公告页面，其次分割表单
                    4.修改表单细节，自动计算总和，逻辑关系处理(如二级考核影响全局)
                    4.通一次业务流程
           实现条件查询！！！
                |__1.提交查询条件

我们现在要解决的问题
    TODO: TONIGHT
        记录可查
            |__专家的填表记录可查
                |__
            |__部门的填表记录可查
                |__
        自动计算
            |__计算自评成绩
                |__完成
            |__计算专家成绩
                |__完成
            |__计算部门成绩
                |__完成
        权限控制



解决问题：
    1.根据测评号得到截止日期
        |__getDeadDate()
            在学院、专家组、部门提交的时候，我们确认一下当前时间与截止时间的关系，来确认是否保存到数据库。
                学院：
                        if(new Date().after(cePinMapper.getDeadDate(form.getForm_cp_id())))
                        {
                            return "已过评测时间！提交失效！";
                        }
    2.添加系统管理员账号
        |__完成！

    2.答卷权限控制
        |__触发器自动刷新权限！
    4.针对某些部门不需要完成三和七项
        我们采用JS控制！！！
            首先用户不需要填写！







